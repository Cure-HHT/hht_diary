#!/bin/bash
# =====================================================
# Plugin-Expert: session-start Hook
# =====================================================
#
# Injects plugin architecture best practices at session start.
#
# Purpose:
# - Remind agent of plugin patterns
# - Establish architectural principles
# - Provide quick reference for plugin work
#
# =====================================================

# Check if we're in a plugin context
CURRENT_DIR=$(pwd)
if [[ ! "$CURRENT_DIR" =~ plugins/ ]]; then
    exit 0
fi

cat << 'EOF'

ðŸ”Œ PLUGIN ARCHITECTURE PRINCIPLES (plugin-expert)

When working with plugins, remember:

1. ðŸŽ¯ Single Responsibility
   Each plugin has ONE clear purpose. Don't mix concerns.

2. ðŸ—ï¸ Separation of Concerns
   - Plugin code stays in plugin directory
   - Cross-plugin features use orchestrator pattern
   - Sub-agents for plugin capabilities

3. ðŸ”§ Modularity
   - Reusable utilities can be extracted
   - Scripts should be composable
   - Clear interfaces between components

4. ðŸ“¦ Plugin Structure
   plugin-name/
   â”œâ”€â”€ .claude-plugin/plugin.json
   â”œâ”€â”€ agents/           # Sub-agents
   â”œâ”€â”€ commands/         # Slash commands
   â”œâ”€â”€ hooks/           # Event hooks
   â”œâ”€â”€ scripts/         # Executables
   â”œâ”€â”€ skills/          # Agent skills
   â”œâ”€â”€ tests/           # Test suite
   â””â”€â”€ README.md        # Documentation

5. ðŸ¤ Integration Patterns
   - Use existing plugins (e.g., linear-integration for tickets)
   - Delegate to sub-agents (most reliable)
   - Orchestrate with scripts (for multi-plugin workflows)
   - Cache results (avoid repeated API calls)

6. âš ï¸ Anti-Patterns to Avoid
   âŒ Creating one-off tools instead of using plugins
   âŒ Mixing plugin responsibilities
   âŒ Duplicating logic across plugins
   âŒ Tight coupling between plugins

If unsure about architecture, ASK USER before proceeding!

EOF

exit 0
