stateDiagram-v2
    [*] --> Sent: Investigator or system triggers
    Sent --> InProgress: Patient opens questionnaire
    InProgress --> ReadyToReview: Patient completes and submits
    ReadyToReview --> InProgress: Patient edits after submission
    ReadyToReview --> Finalized: Investigator approves (scored)
    ReadyToReview --> Finalized: Auto-finalize (unscored)
    Sent --> Deleted: Study coordinator deletes
    InProgress --> Deleted: Study coordinator deletes
    ReadyToReview --> Deleted: Study coordinator deletes
    Finalized --> [*]
    Deleted --> [*]

    classDef sent fill:#1565c0,color:#ffffff,stroke:#0d47a1
    classDef inprogress fill:#ef6c00,color:#ffffff,stroke:#e65100
    classDef readytoreview fill:#f9a825,color:#000000,stroke:#f57f17
    classDef finalized fill:#2e7d32,color:#ffffff,stroke:#1b5e20
    classDef deleted fill:#616161,color:#ffffff,stroke:#424242

    class Sent sent
    class InProgress inprogress
    class ReadyToReview readytoreview
    class Finalized finalized
    class Deleted deleted
